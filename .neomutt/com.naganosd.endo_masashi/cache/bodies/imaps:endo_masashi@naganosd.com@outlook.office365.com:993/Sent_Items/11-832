Received: from Kx250 (125.30.77.206) by TYAP286CA0008.JPNP286.PROD.OUTLOOK.COM
 (2603:1096:404:8015::13) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.3412.22 via Frontend
 Transport; Wed, 23 Sep 2020 23:46:37 +0000
Date: Thu, 24 Sep 2020 08:46:36 +0900
From: masashiendou <endo_masashi@naganosd.com>
To: NSD Mizuki Tonouchi <tonouchi_mizuki@naganosd.com>
Cc: tanahashi_katsuhiro@naganosd.com
Subject: =?utf-8?B?MjAyMDA5MTktOTIz5pel5aCxICjpgaDol6Qp?=
Message-ID: <20200923234636.fs3r3tqmfn7phbiy@Kx250>
User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:68.0) Gecko/20100101
 Thunderbird/68.7.0
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Language: en-US
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
X-MS-Exchange-Organization-ExpirationStartTime: 23 Sep 2020 23:46:37.9472
 (UTC)
X-MS-Exchange-Organization-ExpirationStartTimeReason: OriginalSubmit
X-MS-Exchange-Organization-ExpirationInterval: 1:00:00:00.0000000
X-MS-Exchange-Organization-ExpirationIntervalReason: OriginalSubmit
X-MS-Exchange-Organization-Network-Message-Id:
 769d165f-d592-4dcd-b6f8-08d8601ae9b7
X-MS-Exchange-Organization-AuthSource: HK0PR06MB2739.apcprd06.prod.outlook.com
X-MS-Exchange-Organization-AuthAs: Internal
X-MS-Exchange-Organization-AuthMechanism: 06
X-Originating-IP: [125.30.77.206]
X-ClientProxiedBy: TYAP286CA0008.JPNP286.PROD.OUTLOOK.COM
 (2603:1096:404:8015::13) To HK0PR06MB2739.apcprd06.prod.outlook.com
 (2603:1096:203:55::19)
X-MS-Exchange-Organization-MessageDirectionality: Originating
Return-Path: endo_masashi@naganosd.com
MIME-Version: 1.0

登内様・棚橋様

遠藤です

長期間、日報を送付しておらず申し訳ありません。
9/19(土)~9/23(水)の作業進捗を送ります。

・遅延の課題
　MINO-144 バリデーション仕様策定
　　-> 作業中(稼働中:1.25日)
　MINO-145 バリデーションの実装
　　-> 作業中(稼働中:0.25日)
　MINO-149 製作出荷詳細: 送付先関連のバリデーションの実装
　　-> 未着手
   MINO-245
　　-> 作業中(稼働中:0.75日) / commit hash"30f8a9a"の修正が不十分だったので再度修正中

・実装済みの課題
   MINO-249
　　-> 済み(稼働済み:0.75日) / commit hash"2d1ed2f"で修正

・遅延の代わりに先行している課題

・保留

保留(MINO案件以外)
-------------------------------------------------------
# RCS #
●検証環境の差分の把握(Backlogに課題を登録済み(HAMA-153))
　-> 3/17 Dropbox上の手順とRedmine上の手順の2つがあるため、差分を把握する必要がある
　　　　　下村様に、Vagrant環境の設定ファイル一式を共有するよう依頼した
　　　　　取り急ぎ、Dropbox版検証環境にてHAMA-77で実施している差し替え反映の手順を確認中
　-> 3/17 遠藤検証環境(https://localhost:8080/auth?fgCd=1jj2NSakr8FEfzhY)にて、商品登録を試みたが反映されない
　　　　　ログを確認しようとしたが、RCSのログ出力先が分からなかったため、明日(3/18)下村様に質問予定
　　　　　※HAMA-132にてログ取得を実装するとの記載があるが、HAMA-138を見る限り未実装のようにも見える
　-> 3/18 
朝ミーティングで、過去にWindows環境で当該検証構築手順で正常動作したとのことであったが、遠藤手持ちのLinux環境Windows環境共に正常動作しなかった
　　　　　このため、下村様PCのvagrant環境をpackage.boxとして共有、合わせてVagrantfileを共有頂くよう依頼した
　-> 3/19 朝ミーティングで、下村様PCのVagrant環境を情報共有頂くよう再度依頼した
　-> 3/19 armeria-chefのファイル一式をDropboxに保存していただいた
　　　　　"https://www.dropbox.com/home/700_%E6%8A%80%E8%A1%93%E9%96%8B%E7%99%BA%E9%83%A8/720_RCS%E3%83%BBRSS/RCS%E3%82%B5%E3%83%BC%E3%83%90%E6%A7%8B%E7%AF%89/%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83/armeria-chef"

●Backlog課題の整理
　◆新規課題を遠藤に割当
　　RSS-10 「サンマルタン」admin画面で客室の重複がある
　　HAMA-158 商品登録時に設定により表示崩れが発生する

　◆引継ぎ用課題の作成
　　-> 3/16 親課題として、HAMA-149(業務引継(下村さん->遠藤))を登録
　　　 "https://naganosd.backlog.com/view/HAMA-149"
　　　 当課題に子課題を3つ登録(HAMA-150, 151, 152)
　　　▼処理済み(HAMA-150(担当:遠藤))
　　　　　-> 3/16 下村様がアップロードおよび添付した資料を元に、検証環境で更新・削除の流れを確認
　　　　　　 　　 本番環境で、実際には作業はしないが、手順の流れに不備がないか確認
　　　　　　　　　本番環境へのデプロイ手順で、EC2インスタンス名が古く、現在のAWS構成と食い違っているので、同手順について下村様に修正を依頼済み
　　　　　-> 3/17 朝ミーティングで手順書の更新を下村様に依頼した
　　　▼未対応(HAMA-151(担当:下村様))
　　　　　-> 3/16 HAMA-141, HAMA-142, HAMA-143, HAMA-145, HAMA-147
　　　　　　 　　 について、状態が"未対応"
　　　　　　 　　 
このため、下村様には各課題について、手順があるならファイル添付またはWikiリンク記載、無いなら内容もしくは確認すべき対象を遠藤に伝えて、各課題を"処理中"とする対応を依頼済み
　　　　　-> 3/16 当該子課題に対応する下村様担当の課題について記入いただき、状態を全て「処理済み」に変更
　　　　　　　　　外部リンクが複数有るが、概ね理解できる範囲内
　　　　　　　　　登内様にご確認いただき問題なければ、当該子課題を完了とする
　　　　　-> 3/17 朝ミーティングで登内様に確認を依頼した
　　　▼未対応・処理中(HAMA-152(担当:下村様))
　　　　　-> 3/16 HAMA-77, HAMA-114, HAMA-115, HAMA-126, HAMA-134, HAMA-135
　　　　　　 　　 について、状態が"未対応または処理中"
　　　　　　 　　 このため、下村様が現時点で把握している内容を、各課題に記載を依頼
　　　　　　 　　 未着手であれば、未着手であることを記載を依頼
　　　　　-> 3/16 当該子課題に対応する下村様担当の課題について以下のとおり確認、記入いただいた
　　　　　　　　　　HAMA-77 -> 現状の対応状況を記入、担当者を遠藤に変更
　　　　　　　　　　HAMA-114 -> 連携のスケジュールということで、状態を完了に変更
　　　　　　　　　　HAMA-115 -> 現状の対応状況を記入、担当者を遠藤に変更
　　　　　　　　　　HAMA-126 -> 客先より連絡が無いため、一旦状態を完了に変更
　　　　　　　　　　HAMA-134 -> 
従来のプリンタについて不具合は対応済み、ここ数ヶ月の不具合について追記、状態を完了に変更
　　　　　　　　　　HAMA-135 -> 未対応・未調査、担当者を遠藤に変更
　　　　　　　　　下村様にて、HAMA-152の状態を"完了"に設定いただいた


●RSS(RCSの旧システム)の引継
　◆検証環境の確認
　　-> 3/16 DropboxとRedmineの資料を確認中
　◆本番環境の確認
　　-> 3/16 DropboxとRedmineの資料を確認中
　◆下村様作業
　　-> 3/16 バックアップの取得と共有を登内様から下村様に依頼済み
　
●仕様確認
　◆"業務覚書.txt"に記載の"implement.pptx"を読み込み、RCSの仕様を確認中
　◆構築した検証環境で、RCSの動作を確認中
　フォルダ:
　　/Dropbox(長野システム開発株式会社)/700_技術開発部/720_RCS・RSS/RCSサーバ構築/RCS開発環境構築
　ファイル:
　　業務覚書.txt
　Github:
　　/NaganoSystemDevelopment/armeria/documents/implement.pptx
　　-> 3/13 引き続き確認中


●xcodeのビルド環境(ios)構築手順の引き継ぎ
　　-> 3/17 当作業についての課題をBacklogに作成した(HAMA-154)
　　　　　　長野システム株式会社側のMacと遠藤PC間をTeamViewerで接続して、当該環境を整える
　　　　　　　- TeamViewerのアカウント情報の連絡待ち
　　　　　　登内様より、下村様から遠藤に、通知アプリとRSSプロファイル更新についてレクチャーをするよう依頼があった(キタハラ様、ミヤザワ様と連携とのこと)
　　　　　　　- 下村様からの連絡待ち
　　-> 3/18 
長野システム株式会社にあるMacは下村様使用中のものが、性能的にビルド環境に最も適していて、かつ既に環境構築済みとのこと
　　　　　　このため、当該Macと遠藤PC間をTeamViewerで接続して運用する方向で進める

●バリデーションエラーについて
　-> 3/12 下村様からヒアリング
　-> 3/16 BacklogまたはTeamsのWikiに、現状判明している内容を登録する
　◆管理者が商品を削除したときに、ユーザ側でカートに商品を追加していると(チェックアウトしていない状態のとき)不具合が発生する
　　・原因として、当該処理中に中間テーブル上レコードの論理削除が行われるが、
　　　カテゴリに関連づいているテーブルのレコードは完全に削除されて、
　　　Ajaxの処理が間に合わないときに、当該エラーが発生すると思われるとのこと


●レガシー環境から新しい環境への移行検討
　-> 3/12 下村様からヒアリング
　-> 3/16 BacklogまたはTeamsのWikiに、現状判明している内容を登録する
　◆PHPを最新版7.x.xに出来ない
　　・Zendが7.x.xのPHPに未対応のため
　　・WEBサーバ(Nginx)は可能


# AWS #
●旧バグ/Wiki管理(Redmine)システムについて
　-> 3/12 Redmineの遠藤用のアカウントを下村様に作成いただいた
　-> 3/13 バックログに当作業の課題を登録した
　　 インスタンスタイプの変更は着手できなかったため、3/16以降で調整する
　　　　　当作業により変動する費用の概算を課題に記載した
　　　　　　※補足：停止しているインスタンスに関するEBSについては、何かしかのバックアップをしておく予定
　　　　　　　　　　取得したバックアップはDropboxに保管予定
　　　　　　　　　　EBS全体の容量は1TB、しかし実用量は100GB未満と思われる
　　　　　　　　　　当作業は、課題を概要にまとめて実作業は来週以降の予定
　　◆Vagrantの検証環境の作成は、当該Wikiを参照して下村様は作成
　　　このため、Dropbox上の手順と食い違いがある　
　　◆Redmineに使用しているEC2は社外公開しておらず、パフォーマンスは特別必要ないので、インスタンスタイプは小さくすることが可能
　　　※t1.micro -> nano とする予定
　　　※下村様に確認済み

●プラン見直し
　◆停止しているインスタンスのほぼ全てに、EBSが関連付けられている
　　このため、不要な費用が発生している
　　Redmineが動作しているインスタンスが2つあり、セキュリティグループはWalts
　　RCSと関係ないインスタンスであれば、タグ付をして、RCSの費用計算外としたい
　　RCSと関係あるインスタンスであれば、T1.micro -> T2.nanoにインスタンスタイプを変更して、費用を削減したい
　　-> 3/12 下村様よりRedmineについては、社外公開用などではないとのこと
　　-> ただし、2つの内1つ(ip: 54.178.113.120)は今までのRCSで使用してきたインスタンスだが、もう一つ(ip: 
54.238.51.139)は用途不明とのこと

　◆RI(リザーブドインスタンス)
　　途中でインスタンスタイプを変更すると、割引適用外となってしまうので、過去にBacklogのHAMA-42で議論された、CPU負荷の問題点を明らかにしてから、検討したほうが良いと推察される
　　-> 3/12 CPU高負荷の原因はバックアップによるもので、利用者のアクセスは無関係
　　-> インスタンスタイプをc3.largeから安価なタイプに変更しても、RCSのサービス自体に影響はないと思われる
　　-> 
しかし、c3.largeは古いインスタンスタイプのため、新しいインスタンスタイプに移行するにはAMIが未対応とのこと(下村様に確認済み)
　　-> 3/16 以降、移行手順、およびどのインスタンスタイプへの移行が適切なのか調査を進める

●AWS利用状況の確認
　◆お教えいただいたアカウントにて、現状の構成の確認
　　取り急ぎ、RDSへの移行状況について下村様に質問をして、回答待ち
　　-> 3/12 下村様より以下のとおり回答いただいた
　　　▼EC2上のDB → RDS
　　　　・RDSに移行したほうが料金が高くなるので、現状はEC2のままの方が良い
　　-> 3/16以降 BacklogまたはTeamsのWikiに、現状判明している内容を登録する

よろしくお願いします。

以上
-- 
長野システム開発株式会社
遠藤 將司 ( Masashi Endo )
e-Mail <endo_masashi@naganosd.com>
〒399-4301 長野県上伊那郡宮田村5672-2
URL: http://www.naganosd.com/
